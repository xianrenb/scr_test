Version 4
SHEET 1 880 680
WIRE -16 -128 -656 -128
WIRE 576 -128 -16 -128
WIRE -656 -96 -656 -128
WIRE 576 -96 576 -128
WIRE -16 -32 -16 -128
WIRE 128 16 48 16
WIRE 416 16 208 16
WIRE 576 16 576 -16
WIRE 576 16 416 16
WIRE -656 32 -656 -16
WIRE 416 32 416 16
WIRE 416 128 416 112
WIRE 576 128 576 16
WIRE -240 176 -656 176
WIRE -16 176 -16 64
WIRE -16 176 -160 176
WIRE 512 176 -16 176
WIRE -656 224 -656 176
WIRE -16 224 -16 176
WIRE -16 336 -16 304
WIRE 576 336 576 224
WIRE 576 336 -16 336
WIRE -656 352 -656 304
WIRE -16 384 -16 336
WIRE -16 496 -16 464
FLAG -16 496 0
FLAG -656 32 0
FLAG -656 352 0
FLAG -16 -128 supply
FLAG -656 176 input
FLAG 576 336 load
FLAG 416 128 0
FLAG 416 16 x
SYMBOL npn 512 128 R0
SYMATTR InstName Q1
SYMATTR Value 2N3904
SYMBOL pnp 48 64 R180
SYMATTR InstName Q2
SYMATTR Value 2N3906
SYMBOL res 560 -112 R0
SYMATTR InstName R1
SYMATTR Value 100K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL res -32 208 R0
SYMATTR InstName R2
SYMATTR Value 100K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL res -144 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 1K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL res -32 368 R0
SYMATTR InstName R4
SYMATTR Value 1K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL voltage -656 -112 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value SINE(0 10 100)
SYMBOL voltage -656 208 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(400m 800m {TDELAY} 500u 500u 4.5m 10m)
SYMBOL current 416 112 M180
WINDOW 0 24 77 Left 2
WINDOW 3 24 0 Left 2
WINDOW 123 37 33 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName Ii
SYMATTR Value ""
SYMATTR Value2 AC {u(prb)}
SYMBOL voltage 224 16 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
WINDOW 123 -32 56 VBottom 2
WINDOW 39 -32 56 VBottom 2
SYMATTR InstName Vi
SYMATTR Value ""
SYMATTR Value2 AC {u(-prb)}
TEXT -376 520 Left 2 !;.tran 20m
TEXT -376 568 Left 2 !;.step param TDELAY list 0 2m 3m
TEXT 72 -256 Left 2 ;The return ratio can be plotted by plotting the quantity:\n \n-1/(1-1/(2*(I(Vi)@1*V(x)@2-V(x)@1*I(Vi)@2)+V(x)@1+I(Vi)@2))
TEXT 96 520 Left 2 !.step param prb list -1 1 ; set prb=0 to turn off probe
TEXT 96 568 Left 2 !.ac dec 30 .1 100Meg
TEXT 96 480 Left 2 !.param TDELAY=0
TEXT -368 480 Left 2 !;.param prb=0
